### 序列化源码流程

~~~python
# 对QuerySet进行序列化的  源码

实例化: 
    BaseSerializer --> __new__ --> return ...

# 对象， Serializer类处理； self.to_representation
ser.data: 
    ser.data --> super().data --> to_representation (Serializer类中的) --> get_attribute (Field类中) --> get_attribute --> is_simple_callable
    
    ser.data --> super().data --> to_representation (Serializer类中的) --> to_representation
    
    
# QuerySet，ListSerializer类处理； self.to_representation
ser.data: 
    ser.data --> super().data (ListSerializer类中的) --> to_representation (ListSerializer类中的) --> ...
    
    
--------------------
    
# 验证的源码
is_valid() [BaseSerializer类中] --> run_validation[Serializer类中]  --> to_internal_value() [Serializer类中]  -> 验证的钩子方法 (validate_method)
~~~





~~~python
class UserInfoView(APIView):
    def get(self, request, *args, **kwargs):
        users = models.UserInfo.objects.all()
        # 1. 实例化，一般是将数据封装到对象：__new__, __init__
        """
        many=True, 接下里执行ListSerializer对象的构造方法
        many=False, 接下里执行UserInfoSerializer对象的构造方法
        """ 
        ser = UserInfoSerializer(instance=users, many=True, context={'request': request})
        # 2. 调用对象的data属性
        # ListSerializer
        # UserInfoSerializer
        ret = json.dumps(ser.data, ensure_ascii=False)
        return HttpResponse(ret)
~~~

























