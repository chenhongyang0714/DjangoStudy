# 后台获取前端的数据 
#### 1. URL路径参数
对于这种数据，他在前端的URL中，例如:www.baidu.com/id/
~~~python
# 获取 url 中的 id
def method(request, id):
	print('id:{}'.format(id))
~~~
#### 2.查询字符串
www.baidu.com/data/?a=10&b=20&a=30   （这个路径中有两个a，因为前端有时会有一键多值的情况）
~~~
重要:查询字符串不区分请求方式，即使客户端进行POST方式的请求，依然可以通过request.GET获取请求中的查询字符串数据
~~~
~~~python
def method(request):
    a = request.GET['a', 1] # 30     type(a) == 'str', 默认值 1 也是 str
	a = request.GET.get('a') # 30   建议
	b = request.GET.get('b') # 20
	alist = request.GET.getlist('a') # ['10', '30']
~~~
#### 3.请求体中的数据
请求体数据格式不固定，可以是表单类型字符串，可以是JSON字符串，可以是XML字符串，应区别对待。
可以发送请求体数据的请求方式有POST、PUT、PATCH、DELETE。
##### (1)表单数据
表单数据通过request.POST返回的Query Dict对象来获取
~~~
注意：request.POST只能用来获取POST方式的请求体表单数据
~~~
~~~
方法:request.POST[]、request.POST.get()和request.POST.getlist()
~~~
~~~python
def method(request):
	a = requestr.POST['a']
	a = request.POST.get('a')  # 建议
	b = request.POST.get('b')
	alist = request.POST.getlist()
~~~
~~~
requestr.POST['a']与request.POST.get('a')的区别:
如果传递过来的数值不为空，那么这两种方法都没有错误，可以得到相同的结果。但是如果传递过来的数值为空，那么request.POST[‘username’]则会提示Keyerror错误，而request.POST.get(‘username’)则不会报错，而是返回一个None。
~~~
~~~
request.POST.get('a')的优点:
如果数值sth不存在的话，我们可以指定显示的默认值：
request.POST.get('sth', 'default_value')
~~~
##### (2)非表单数据
~~~
非表单类型的请求体数据，Django无法自动解析，可以通过request.body属性获取最原始的请求体数据，自己按照请求体格式（JSON、XML等）进行解析。request.body返回bytes类型。
~~~
~~~
例如要获取请求体中的如下JSON数据
{"name":"chy", "age":"21"}
方法:因为获取到的是原始二进制数据，要进行解码（字符串化，得到json数据），json_dict化（将json数据转换成字典）
~~~
~~~python
import json

def mothod(request):
	json_str = request.body
	json_str = json_str.decode() # python3.6无需执行此步骤
	req_data = json.loads(json_str)
	print('name:{}'.fromat(req_data['name']))  # type(req_data['name']) = str
	print('age:{}'.format(req_data['age']))
~~~
#### 请求头中的数据
~~~
可以通过request.META属性获取请求头headers中的数据，request.META为字典类型。
~~~
~~~
常见的请求头如：
CONTENT_LENGTH - 请求正文的长度（作为字符串）。
CONTENT_TYPE - 请求正文的MIME类型。
HTTP_ACCEPT - 响应的可接受内容类型。
HTTP_ACCEPT_ENCODING - 响应的可接受编码。
HTTP_ACCEPT_LANGUAGE - 响应的可接受语言。
HTTP_HOST - 客户端发送的HTTP主机头。
HTTP_REFERER - 引用页面（如果有）。
HTTP_USER_AGENT - 客户端的用户代理字符串。
QUERY_STRING - 查询字符串，作为单个（未解析）字符串。
REMOTE_ADDR - 客户端的IP地址。
REMOTE_HOST - 客户端的主机名。
REMOTE_USER - Web服务器验证的用户（如果有）。
REQUEST_METHOD - 诸如“GET”或“POST”之类的字符串。
SERVER_NAME - 服务器的主机名。
SERVER_PORT - 服务器的端口（作为字符串）。
~~~
~~~python
def method(request):
	print(request.META['CONTENT_LENGTH'])
~~~
~~~
注意: 除了CONTENT_LENGTH和CONTENT_TYPE之外，请求中的任何HTTP头都将转换为META密钥，方法是将所有字符转换为大写，用下划线替换任何连字符，并在名称中添加HTTP_前缀。因此，例如，名为X-Bender的标头将映射到META密钥HTTP_X_BENDER。
~~~
#### 其他常用请求对象
~~~
request.method: 一个字符串，表示请求使用的HTTP方法，常用值包括：'GTE'、'POST'。
request.user: 请求的用户对象
request.path: 一个字符串，表示请求的页面的完整路径，不包含域名和参数部分。
request.encoding: 一个字符串，表示提交的数据的编码方式。如果为None，则表示使用浏览器的默认设置，一般为utf-8。这个属性是可写的，可以通过修改它来修改访问表单数据使用的编码，接下来对属性的任何访问将使用新的encoding值。
request.FILES: 一个类似于字典的对象，包含所有的上传文件。 
request.COOKIES: 标准的python字典，包含所有cookie的键值对。键与值都是字符串。
request.body: 请求的主体，返回一个字符串。
request.data: 请求的数据部分，返回一个字典对象(与.body相似)
~~~




